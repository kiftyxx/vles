function a0_0x1238(){const _0x1763dd=['Aw5KAwe','yxvZDhjHBgLH','mtbtzKTpDhy','Cgf0Aa','l3jLCg9YDc1VBMXPBMu','C3rYAw5NAwz5','y2HHCKnVzgvbDa','C2vUza','B25SAw5LvxnLCNm','vJjIwc1drI1xB3jRzxiVms4W','D3jPDgu','DMXLC3m','C2vHCMnO','uhjVEhLjuc5trY5dtuXPDxnZC3mUBMv0oJq0mW','Bw9Zy293','yxjYyxLcDwzMzxi','BxvTyMfP','zgf0yq','zNjHBMTMDxj0','ihvZzxjZigzYB20GvJjIB2fYza','y2HYB21L','DhjPBq','CMvHzhLtDgf0zq','qwXSihbYB3H5igf0DgvTChrZigzHAwXLzdO','yw1LCMLJyq','zNjHBMnL','yNL0zuXLBMD0Aa','Dgv4Dc9WBgfPBJSGy2HHCNnLDd11DgyToa','zw50CMLLCW','C3rHDhvZ','ywrKrxzLBNrmAxn0zw5LCG','BMv0D29YAW','t25SAw5LihvZzxjZihjLCg9YDcb0CMLNz2vYzwq','5PAW5yQG5z2H','A2v5CW','zxjYB3i','Dg9mB3DLCKnHC2u','y2fUywrH','zg93BMXVywq','AxnbCNjHEq','otHszNrOt24','Bg9Uzg9U','DhDPDhrLAxr3Axr0zwL0D2L0DgvP','uMvWB3j0ihrYywzMAwmGzxjYB3i6','jNrVA2vUpq','uhjVEhLjuc5vuY5dtuXPDxnZC3mUBMv0oJq0mW','y2XVC2u','y2HPBMe','mtC4mdqWDeTIq29i','ntm2mtGWnwnbB3rOCW','yxbPsg9ZDa','BwvZC2fNzq','y2yUDhDPDhrLCI5UB3CUy2m6ndqZ','DxvPza','AM9PBG','CMvHBgL0Eq','r0vu','CNvZC2LH','pgGXpUkCHsbwmMjyie5VzguGv29YA2vYifj1BM5PBMC8l2GXpJXWpKnVBM5Ly3rPBMCGDg8GvJjIB2fYzcbIywnRzw5Kpc9WpG','ywnJzxb0','zM9YrwfJAa','DgXZ','v2vIu29JA2v0igvYCM9Y','DgfPCgvP','mZqYodi3mwvYCxzuBq','uMvWB3j0ihrYywzMAwmGzMfPBgvKoG','C2vJDxjPDhK','z2v0vwLUDde2','Dgv4Dc9ODg1SoYbJAgfYC2v0pxv0zI04','BM9KzuLK','tM9KzsbUB3qGy29UzMLNDxjLza','BM9Uzq','B3bLBMvK','re5tihf1zxj5igzHAwXLzdO','BM9Kzvr5Cgu','Dg9REw8','C2LUz2fWB3jL','CgfYAxm','Dg9tDhjPBMC','BgfZDfvWzgf0zq','ANnVBG','yMvZDgnMlJaZmdeWms54ExO6ndqZ','Aw5KzxHpzG','z2v0','Bwv0Ag9K','Ag9ZDa','CgLWzvrV','mZCXodC5mLv2u256rG','z2v0v3jPDgvY','zw5XDwv1zq','mJe3mdq3mhfrq0LcAG','AgTN','D2vIC29JA2v0','l2fWAs92ms9Zzxj2zxiVvw5PuhjVEhKVywXPDMu/BM9Kzv90ExbLpq','C3bSAxq','Bg9N','C2v0','AgvHzgvYCW','C2LUz2fWBW','ChvIBgLJx2TLEq','CMvSzwfZzuXVy2S','C2vJlxDLyNnVy2TLDc1WCM90B2nVBa','DgXZx3nLDhrPBMDZ','ChvZAa','AMfWyw4Uy29ToJq0mW','ig9UBgLUzsb1C2vYCW','DxnH','C2vYDMvYx3bVCNq','C2fVihbHDwXV','5R6Z5AsN5yIP5lQA','CMvWBgfJzq','Ag9ZDg5HBwu','Aw5JBhvKzxm','u3LUy2vKia','DxjS','l2fWAs92ms9Zzxj2zxiVvw5PuhjVEhKVDxnLCJ9UB2rLx3r5Cgu9','Ag9Uz2TVBMC','C3LKBMv5','zMLSDgvY','D3jPDgfIBgu','ue9tva','rMfPBgvKihrVihn5BMmGvJjIB2fYzcbJB25MAwC6','uMvWB3j0zwqG','ywrK','Cgf0Ag5HBwu','zgvSzxrL','BwfW','rgLYzwn0ignVBM5Ly3rPB24GzMfPBgvKigfUzcbUBYbWCM94EsbHDMfPBgfIBgu','5yQG5OU/5AsN','mZq3mJi2B3rZtePy','DM1LC3m','lu5Vzgu','C2XPy2u','z2v0vwLUDdG','mJe3ndCYr3b4Afrr','C3vIC3rYAw5N','DxnLCNm','zgvJB2rL','C3b4','l2fWAs92ms9Zzxj2zxiVvw5PuhjVEhKVy29UzMLNp25VzgvFDhLWzt0','BM8Ty2fJAgu','BMv0D29YA19Zzxr0Aw5NCW','z2vYBwfUEq','BgvUz3rO','DMXLC3m6lY8','BM93','uhjVEhLjuc5kuc5dtuXPDxnZC3mUBMv0oJq0mW','C2HVCNrFAwq','C3vIC3rY','CMvHzgfIBgu','jM5VzgvFAwq9','uMvWB3j0zwqGDhjHzMzPyYbMB3iG','DhjVAMfU','jtng','Ahr0Chm6lY9SAw55DwnOlMv1lM9YzW','C2LK','D2fPDfvUDgLS','yMvPAMLUzW','yMvZDhbYB3H5lJaZmdeWms54ExO6ndqZ','BM9KzuLUzM8','C2vYDMvYx25HBwu','zMXVDW','y2f0y2G','DwLK','yxbWBgLJyxrPB24VANnVBG','vxbNCMfKzq','ywXS','q0yTv29YA2vY','D3D3lNzPC2eUy29TlNnNoJq0mW','uMvWB3j0ig9UBgLUzsb1C2vYCYbLCNjVCJO','DgvSzwnVBs50D2L0DgvYlM5VDY5JyZO0ndm','yxbPs2v5','Dw5Py29TlNr3Axr0zxiUBM93lMnJoJq0mW','DxbSB2fK','yNjHEMLS','DhjHzMzPy0j1zMzLCG','BM8TC3rVCMuSig5VlwnHy2HLlcbTDxn0lxjLDMfSAwrHDguSig1HEc1Hz2u9ma','DxbSB2fKpta7igrVD25SB2fKpta7ihrVDgfSpteWnZm3nde4mJqWoYbLEhbPCMu9ma'];a0_0x1238=function(){return _0x1763dd;};return a0_0x1238();}const a0_0xdbeb0a=a0_0x80a9;(function(_0x18893b,_0x544e5a){const _0x3ca7ba=a0_0x80a9,_0x58e4d1=_0x18893b();while(!![]){try{const _0x1a9260=-parseInt(_0x3ca7ba(0x1fb))/0x1*(-parseInt(_0x3ca7ba(0x229))/0x2)+parseInt(_0x3ca7ba(0x281))/0x3+parseInt(_0x3ca7ba(0x257))/0x4+-parseInt(_0x3ca7ba(0x258))/0x5+-parseInt(_0x3ca7ba(0x1f6))/0x6*(-parseInt(_0x3ca7ba(0x24f))/0x7)+-parseInt(_0x3ca7ba(0x27e))/0x8+-parseInt(_0x3ca7ba(0x267))/0x9;if(_0x1a9260===_0x544e5a)break;else _0x58e4d1['push'](_0x58e4d1['shift']());}catch(_0xb0ea42){_0x58e4d1['push'](_0x58e4d1['shift']());}}}(a0_0x1238,0xb67a1));import{connect}from'cloudflare:sockets';const V2BOARD_CONFIG={'apiHost':a0_0xdbeb0a(0x20f),'apiKey':a0_0xdbeb0a(0x251),'nodeId':0x1,'nodeType':a0_0xdbeb0a(0x232)},FALLBACK_CONFIG={'proxyIPs':[a0_0xdbeb0a(0x213)],'bestDomains':[a0_0xdbeb0a(0x278),a0_0xdbeb0a(0x28f),a0_0xdbeb0a(0x21d)]},BUILTIN_PROXY_IPS=['ProxyIP.HK.CMLiussss.net:443',a0_0xdbeb0a(0x207),a0_0xdbeb0a(0x234),a0_0xdbeb0a(0x254),a0_0xdbeb0a(0x213)],BUILTIN_BEST_DOMAINS=[a0_0xdbeb0a(0x25b),a0_0xdbeb0a(0x21f),a0_0xdbeb0a(0x221),'bestcf.030101.xyz:443',a0_0xdbeb0a(0x28f),a0_0xdbeb0a(0x21d)],CACHE_TTL=0xea60;let cachedData={'users':{},'nodeInfo':null,'lastUpdate':0x0,'trafficBuffer':[],'onlineUsers':new Set()};const GEO_KEYWORDS={'HK':['hk',a0_0xdbeb0a(0x29b),'hong\x20kong','香港',a0_0xdbeb0a(0x282)],'TW':['tw','taiwan','台湾',a0_0xdbeb0a(0x266),'台北'],'JP':['jp','japan','日本',a0_0xdbeb0a(0x272),'东京'],'SG':['sg',a0_0xdbeb0a(0x273),a0_0xdbeb0a(0x248),a0_0xdbeb0a(0x289)],'US':['us',a0_0xdbeb0a(0x291),a0_0xdbeb0a(0x23f),'美国','united\x20states'],'KR':['kr','korea','韩国','seoul','首尔'],'UK':['uk',a0_0xdbeb0a(0x250),'英国','britain'],'DE':['de',a0_0xdbeb0a(0x203),'德国',a0_0xdbeb0a(0x239),'法兰克福'],'FR':['fr',a0_0xdbeb0a(0x240),'法国',a0_0xdbeb0a(0x274),'巴黎'],'CA':['ca',a0_0xdbeb0a(0x24c),a0_0xdbeb0a(0x1f5),'toronto'],'AU':['au',a0_0xdbeb0a(0x228),a0_0xdbeb0a(0x294),a0_0xdbeb0a(0x29c)],'CN':['cn',a0_0xdbeb0a(0x256),'中国',a0_0xdbeb0a(0x212),'shanghai'],'IN':['in',a0_0xdbeb0a(0x227),'印度',a0_0xdbeb0a(0x237)],'RU':['ru',a0_0xdbeb0a(0x260),'俄罗斯',a0_0xdbeb0a(0x235)],'BR':['br',a0_0xdbeb0a(0x223),'巴西',a0_0xdbeb0a(0x293)],'NL':['nl','netherlands','荷兰','amsterdam']};function a0_0x80a9(_0x58b055,_0x370e56){_0x58b055=_0x58b055-0x1f0;const _0x12389b=a0_0x1238();let _0x80a92f=_0x12389b[_0x58b055];if(a0_0x80a9['JJLhqE']===undefined){var _0x35d3ec=function(_0x1d6937){const _0x5d26dd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x9bf21a='',_0xba546c='';for(let _0x1c270f=0x0,_0x8db343,_0x2a6cb3,_0x289f20=0x0;_0x2a6cb3=_0x1d6937['charAt'](_0x289f20++);~_0x2a6cb3&&(_0x8db343=_0x1c270f%0x4?_0x8db343*0x40+_0x2a6cb3:_0x2a6cb3,_0x1c270f++%0x4)?_0x9bf21a+=String['fromCharCode'](0xff&_0x8db343>>(-0x2*_0x1c270f&0x6)):0x0){_0x2a6cb3=_0x5d26dd['indexOf'](_0x2a6cb3);}for(let _0x42abea=0x0,_0x265ee6=_0x9bf21a['length'];_0x42abea<_0x265ee6;_0x42abea++){_0xba546c+='%'+('00'+_0x9bf21a['charCodeAt'](_0x42abea)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xba546c);};a0_0x80a9['UUWLUq']=_0x35d3ec,a0_0x80a9['eZXUys']={},a0_0x80a9['JJLhqE']=!![];}const _0x52c54e=_0x12389b[0x0],_0x4395ab=_0x58b055+_0x52c54e,_0x3cfe0d=a0_0x80a9['eZXUys'][_0x4395ab];return!_0x3cfe0d?(_0x80a92f=a0_0x80a9['UUWLUq'](_0x80a92f),a0_0x80a9['eZXUys'][_0x4395ab]=_0x80a92f):_0x80a92f=_0x3cfe0d,_0x80a92f;}function extractGeoLocation(_0x9bf21a){const _0x9482fe=a0_0xdbeb0a;if(!_0x9bf21a)return null;const _0xba546c=_0x9bf21a[_0x9482fe(0x24b)]();for(const [_0x1c270f,_0x8db343]of Object[_0x9482fe(0x243)](GEO_KEYWORDS)){for(const _0x2a6cb3 of _0x8db343){if(_0xba546c[_0x9482fe(0x297)](_0x2a6cb3))return _0x1c270f;}}return null;}function smartSortProxies(_0x289f20,_0x42abea){const _0x4d73ec=a0_0xdbeb0a;if(!_0x289f20||_0x289f20[_0x4d73ec(0x204)]===0x0)return[];const _0x265ee6=extractGeoLocation(_0x42abea);if(!_0x265ee6)return[..._0x289f20];const _0x37a8ad=[],_0xb86250=[];return _0x289f20['forEach'](_0x5d8d98=>{const _0x153917=_0x4d73ec,_0x4d7a38=extractGeoLocation(_0x5d8d98);_0x4d7a38===_0x265ee6?_0x37a8ad['push'](_0x5d8d98):_0xb86250[_0x153917(0x28e)](_0x5d8d98);}),[..._0x37a8ad,..._0xb86250];}export default{async 'fetch'(_0x2c03a1,_0x57857f,_0x2e6ac9){const _0x59c889=a0_0xdbeb0a,_0x193f14=new URL(_0x2c03a1[_0x59c889(0x299)]);if(_0x2c03a1[_0x59c889(0x288)][_0x59c889(0x27a)](_0x59c889(0x21a))?.[_0x59c889(0x24b)]()===_0x59c889(0x283))return await handleWebSocket(_0x2c03a1,_0x2e6ac9);if(_0x2c03a1[_0x59c889(0x27b)]===_0x59c889(0x25f)){if(_0x193f14[_0x59c889(0x1f1)]==='/')return new Response(_0x59c889(0x261),{'status':0xc8,'headers':{'Content-Type':_0x59c889(0x26b)}});if(_0x193f14['pathname']===_0x59c889(0x22b))return _0x2e6ac9['waitUntil'](reportOnlineUsers()),new Response(_0x59c889(0x247),{'status':0xc8});await syncV2boardConfig();const _0x37ab47=cachedData['users'];for(const _0x440511 of Object['keys'](_0x37ab47)){if(_0x193f14['pathname'][_0x59c889(0x24b)]()['includes'](_0x440511[_0x59c889(0x24b)]()))return await handleSubscription(_0x2c03a1,_0x440511);}}return new Response('Not\x20Found\x20-\x20No\x20matching\x20UUID\x20in\x20path',{'status':0x194});}};async function syncV2boardConfig(_0x5d841c=![]){const _0x55babb=a0_0xdbeb0a,_0x1f06f7=Date[_0x55babb(0x206)]();if(!_0x5d841c&&_0x1f06f7-cachedData[_0x55babb(0x276)]<CACHE_TTL)return;if(_0x5d841c&&_0x1f06f7-cachedData[_0x55babb(0x276)]<0x1388)return;try{const _0x5418f5=V2BOARD_CONFIG[_0x55babb(0x259)]+_0x55babb(0x200)+V2BOARD_CONFIG[_0x55babb(0x271)]+'&node_id='+V2BOARD_CONFIG[_0x55babb(0x26c)]+_0x55babb(0x253)+V2BOARD_CONFIG[_0x55babb(0x220)],_0x2cc069=await fetch(_0x5418f5,{'headers':{'User-Agent':_0x55babb(0x230)},'cf':{'cacheTtl':0x0}});if(!_0x2cc069['ok'])throw new Error('Get\x20node\x20info\x20failed:\x20HTTP\x20'+_0x2cc069['status']);const _0x231fda=await _0x2cc069[_0x55babb(0x277)](),_0x1c37b7=V2BOARD_CONFIG[_0x55babb(0x259)]+_0x55babb(0x29a)+V2BOARD_CONFIG['nodeType']+_0x55babb(0x20b)+V2BOARD_CONFIG['nodeId']+_0x55babb(0x253)+V2BOARD_CONFIG[_0x55babb(0x220)],_0x13384a=await fetch(_0x1c37b7,{'headers':{'User-Agent':_0x55babb(0x230)},'cf':{'cacheTtl':0x0}});if(!_0x13384a['ok'])throw new Error('Get\x20user\x20list\x20failed:\x20HTTP\x20'+_0x13384a[_0x55babb(0x244)]);const _0x45c26d=await _0x13384a[_0x55babb(0x277)](),_0x3c7411={};_0x45c26d[_0x55babb(0x1fd)]&&Array[_0x55babb(0x24e)](_0x45c26d[_0x55babb(0x1fd)])&&_0x45c26d[_0x55babb(0x1fd)][_0x55babb(0x263)](_0x3d20bd=>{const _0x3935b1=_0x55babb;_0x3c7411[_0x3d20bd[_0x3935b1(0x25c)]]=_0x3d20bd['id'];}),cachedData[_0x55babb(0x1fd)]=_0x3c7411,cachedData['nodeInfo']=_0x231fda,cachedData[_0x55babb(0x276)]=_0x1f06f7,console['log'](_0x55babb(0x298)+Object[_0x55babb(0x249)](_0x3c7411)[_0x55babb(0x204)]+_0x55babb(0x23a));}catch(_0xe14fa7){console[_0x55babb(0x24a)](_0x55babb(0x2a0),_0xe14fa7[_0x55babb(0x25a)]);}}async function handleSubscription(_0x16aa1b,_0x26858c){const _0x4508f4=a0_0xdbeb0a,_0x266b09=new URL(_0x16aa1b[_0x4508f4(0x299)]),_0xd749d8=_0x266b09[_0x4508f4(0x296)],_0xb0bb1f=cachedData['nodeInfo'];if(!_0xb0bb1f)return new Response(_0x4508f4(0x26d),{'status':0x1f7});const _0x20d001=generateVlessLinks(_0xd749d8,_0x26858c,_0xb0bb1f),_0xe769e2=btoa(_0x20d001[_0x4508f4(0x25d)]('\x0a'));return new Response(_0xe769e2,{'headers':{'Content-Type':_0x4508f4(0x242),'Cache-Control':_0x4508f4(0x225),'Pragma':_0x4508f4(0x201),'Profile-Update-Interval':'6','Subscription-Userinfo':_0x4508f4(0x226)}});}function generateVlessLinks(_0x368b9d,_0x102e88,_0x56b410){const _0x2db4dc=a0_0xdbeb0a,_0x296364=[],_0x4228b4=V2BOARD_CONFIG[_0x2db4dc(0x271)],_0x31a2d9=_0x56b410[_0x2db4dc(0x292)]||0x1bb,_0x1cdd3d=_0x56b410[_0x2db4dc(0x246)]||'ws',_0x307bea=_0x56b410[_0x2db4dc(0x215)]||_0x56b410[_0x2db4dc(0x27c)]||_0x368b9d,_0x2e5324=BUILTIN_BEST_DOMAINS[_0x2db4dc(0x204)]>0x0?BUILTIN_BEST_DOMAINS:[_0x368b9d];let _0x515018='/?ed=2048';if(_0x56b410[_0x2db4dc(0x202)])try{const _0x3d7bb2=typeof _0x56b410[_0x2db4dc(0x202)]==='string'?JSON['parse'](_0x56b410['network_settings']):_0x56b410['network_settings'];_0x3d7bb2[_0x2db4dc(0x22a)]&&(_0x515018=_0x3d7bb2['path']);}catch(_0x5f07be){console[_0x2db4dc(0x24a)]('Parse\x20network_settings\x20failed:',_0x5f07be);}const _0x437e84=_0x56b410[_0x2db4dc(0x264)]===0x1?_0x2db4dc(0x264):_0x2db4dc(0x26e),_0x31e53a=_0x437e84===_0x2db4dc(0x264)?_0x2db4dc(0x264):_0x2db4dc(0x26e),_0x40d779=new URLSearchParams({'encryption':_0x2db4dc(0x26e),'security':_0x31e53a,'type':_0x1cdd3d,'host':_0x368b9d,'path':encodeURIComponent(_0x515018),'sni':_0x307bea,'fp':_0x2db4dc(0x23b)});return _0x56b410[_0x2db4dc(0x264)]===0x2&&_0x56b410[_0x2db4dc(0x28d)]&&(_0x40d779['set'](_0x2db4dc(0x269),_0x2db4dc(0x25e)),_0x40d779[_0x2db4dc(0x287)]('pbk',_0x56b410['tls_settings'][_0x2db4dc(0x28a)]||''),_0x40d779['set'](_0x2db4dc(0x210),_0x56b410[_0x2db4dc(0x28d)][_0x2db4dc(0x208)]||''),_0x40d779[_0x2db4dc(0x287)](_0x2db4dc(0x1ff),'')),_0x4228b4===_0x2db4dc(0x232)&&_0x56b410[_0x2db4dc(0x216)]&&_0x40d779[_0x2db4dc(0x287)](_0x2db4dc(0x216),_0x56b410['flow']),_0x2e5324[_0x2db4dc(0x263)]((_0x4b0fae,_0xfda078)=>{const _0x260efd=_0x2db4dc,_0x1f7fbf=_0x4b0fae[_0x260efd(0x285)]('#');let _0x5007b5=_0x1f7fbf[0x0][_0x260efd(0x23c)]();const _0xfb04ec=_0x1f7fbf[0x1]?_0x1f7fbf[0x1][_0x260efd(0x23c)]():null;let _0x5edfab,_0x593764;if(_0x5007b5[_0x260efd(0x297)](':')){const _0x198671=_0x5007b5[_0x260efd(0x285)](':');_0x5edfab=_0x198671[0x0],_0x593764=parseInt(_0x198671[0x1]);}else _0x5edfab=_0x5007b5,_0x593764=0x1bb;let _0x1ceeb7;_0xfb04ec?_0x1ceeb7=_0xfb04ec+_0x260efd(0x1f8)+V2BOARD_CONFIG['nodeId']:_0x1ceeb7=_0x5edfab+'-Node'+V2BOARD_CONFIG['nodeId'];let _0x32358d;if(_0x4228b4===_0x260efd(0x232))_0x32358d=_0x260efd(0x205)+_0x102e88+'@'+_0x5edfab+':'+_0x593764+'?'+_0x40d779[_0x260efd(0x275)]()+'#'+encodeURIComponent(_0x1ceeb7);else{if(_0x4228b4===_0x260efd(0x1f7)){const _0x3d2437={'v':'2','ps':_0x1ceeb7,'add':_0x5edfab,'port':_0x593764[_0x260efd(0x275)](),'id':_0x102e88,'aid':'0','net':_0x1cdd3d,'type':_0x260efd(0x26e),'host':_0x368b9d,'path':_0x515018,'tls':_0x437e84,'sni':_0x307bea,'alpn':''};_0x32358d='vmess://'+btoa(JSON[_0x260efd(0x22c)](_0x3d2437));}else _0x4228b4===_0x260efd(0x20d)&&(_0x32358d='trojan://'+_0x102e88+'@'+_0x5edfab+':'+_0x593764+'?'+_0x40d779[_0x260efd(0x275)]()+'#'+encodeURIComponent(_0x1ceeb7));}_0x296364['push'](_0x32358d);}),_0x296364;}async function handleWebSocket(_0x5774f7,_0x4a4b73){const _0x1ce803=a0_0xdbeb0a,[_0x2d3a55,_0x161307]=Object['values'](new WebSocketPair());_0x161307[_0x1ce803(0x262)](),await syncV2boardConfig();const _0x5037db=new URL(_0x5774f7['url']);if(_0x5037db['pathname'][_0x1ce803(0x297)](_0x1ce803(0x20e))){const _0x27c502=decodeURIComponent(_0x5037db[_0x1ce803(0x1f1)]),_0x19fc67=_0x27c502[_0x1ce803(0x279)]('?');_0x19fc67!==-0x1&&(_0x5037db[_0x1ce803(0x233)]=_0x27c502[_0x1ce803(0x1fc)](_0x19fc67),_0x5037db[_0x1ce803(0x1f1)]=_0x27c502[_0x1ce803(0x1fc)](0x0,_0x19fc67));}const _0x114cb1=cachedData[_0x1ce803(0x214)];let _0x1fdfd1=FALLBACK_CONFIG['proxyIPs'];if(_0x114cb1&&_0x114cb1['routes']){const _0x43863d=_0x114cb1['routes'][_0x1ce803(0x29d)](_0x4a2fda=>_0x4a2fda['action']==='proxy');if(_0x43863d[_0x1ce803(0x204)]>0x0)_0x1fdfd1=_0x43863d[_0x1ce803(0x1f3)](_0x5b0fcc=>_0x5b0fcc['action_value']);else BUILTIN_PROXY_IPS[_0x1ce803(0x204)]>0x0&&(_0x1fdfd1=BUILTIN_PROXY_IPS);}else BUILTIN_PROXY_IPS[_0x1ce803(0x204)]>0x0&&(_0x1fdfd1=BUILTIN_PROXY_IPS);let _0x767131=null,_0x23d58d=null,_0x114161=![],_0x515a3a=null,_0x2f673f={'upload':0x0,'download':0x0};return new ReadableStream({'start'(_0x45ae2e){const _0x5aac9f=_0x1ce803;_0x161307[_0x5aac9f(0x245)](_0x5aac9f(0x25a),_0x310e3d=>{const _0x4f4d0b=_0x5aac9f;_0x45ae2e['enqueue'](_0x310e3d[_0x4f4d0b(0x238)]);}),_0x161307[_0x5aac9f(0x245)](_0x5aac9f(0x255),()=>{const _0x8d37ef=_0x5aac9f;_0x515a3a&&(reportTraffic(_0x515a3a['id'],_0x2f673f[_0x8d37ef(0x222)],_0x2f673f['download'],_0x4a4b73),cachedData[_0x8d37ef(0x22f)][_0x8d37ef(0x1f2)](_0x515a3a['id']));if(_0x767131)try{_0x767131[_0x8d37ef(0x255)]();}catch(_0x1317ba){}_0x45ae2e[_0x8d37ef(0x255)]();}),_0x161307[_0x5aac9f(0x245)](_0x5aac9f(0x24a),()=>{const _0x2478a8=_0x5aac9f;if(_0x767131)try{_0x767131[_0x2478a8(0x255)]();}catch(_0xa681c8){}try{_0x45ae2e[_0x2478a8(0x24a)](new Error(_0x2478a8(0x265)));}catch(_0x112fb1){}});const _0x11b92e=_0x5774f7[_0x5aac9f(0x288)][_0x5aac9f(0x27a)](_0x5aac9f(0x28c));if(_0x11b92e)try{const _0x3a2d4a=Uint8Array['from'](atob(_0x11b92e[_0x5aac9f(0x295)](/-/g,'+')[_0x5aac9f(0x295)](/_/g,'/')),_0x13a64b=>_0x13a64b[_0x5aac9f(0x22d)](0x0));_0x45ae2e['enqueue'](_0x3a2d4a['buffer']);}catch(_0x246e28){}}})[_0x1ce803(0x27d)](new WritableStream({async 'write'(_0x24d820){const _0x1d43b7=_0x1ce803;if(_0x114161&&_0x23d58d){try{await _0x23d58d[_0x1d43b7(0x231)](_0x24d820);}catch(_0x4f290d){}return;}if(_0x767131){try{const _0x37cd5b=_0x767131[_0x1d43b7(0x29e)][_0x1d43b7(0x27f)]();await _0x37cd5b[_0x1d43b7(0x231)](_0x24d820),_0x37cd5b[_0x1d43b7(0x28b)](),_0x2f673f[_0x1d43b7(0x222)]+=_0x24d820[_0x1d43b7(0x241)];}catch(_0x2c6b4a){}return;}if(_0x24d820[_0x1d43b7(0x241)]<0x18)return;const _0x165f9f=new DataView(_0x24d820),_0xd0408a=new Uint8Array(_0x24d820['slice'](0x1,0x11)),_0x134947=bytesToUUID(_0xd0408a);if(!cachedData[_0x1d43b7(0x1fd)][_0x134947]){await syncV2boardConfig(!![]);if(!cachedData[_0x1d43b7(0x1fd)][_0x134947]){console[_0x1d43b7(0x286)]('Unauthorized\x20UUID:',_0x134947);return;}}_0x515a3a={'uuid':_0x134947,'id':cachedData[_0x1d43b7(0x1fd)][_0x134947]},cachedData[_0x1d43b7(0x22f)][_0x1d43b7(0x1f0)](_0x515a3a['id']);const _0x6ec314=_0x165f9f[_0x1d43b7(0x1fa)](0x0),_0xce9f85=_0x165f9f[_0x1d43b7(0x1fa)](0x11),_0x4035cb=_0x165f9f[_0x1d43b7(0x1fa)](0x12+_0xce9f85);if(_0x4035cb!==0x1&&_0x4035cb!==0x2)return;let _0x43f3f5=0x13+_0xce9f85;const _0x23ba9b=_0x165f9f[_0x1d43b7(0x26a)](_0x43f3f5),_0x1dcda2=_0x165f9f['getUint8'](_0x43f3f5+0x2);_0x43f3f5+=0x3;let _0x3a4122='';if(_0x1dcda2===0x1)_0x3a4122=_0x165f9f[_0x1d43b7(0x1fa)](_0x43f3f5)+'.'+_0x165f9f[_0x1d43b7(0x1fa)](_0x43f3f5+0x1)+'.'+_0x165f9f[_0x1d43b7(0x1fa)](_0x43f3f5+0x2)+'.'+_0x165f9f[_0x1d43b7(0x1fa)](_0x43f3f5+0x3),_0x43f3f5+=0x4;else{if(_0x1dcda2===0x2){const _0x54a12d=_0x165f9f[_0x1d43b7(0x1fa)](_0x43f3f5);_0x43f3f5+=0x1,_0x3a4122=new TextDecoder()[_0x1d43b7(0x1fe)](_0x24d820[_0x1d43b7(0x1f9)](_0x43f3f5,_0x43f3f5+_0x54a12d)),_0x43f3f5+=_0x54a12d;}else{if(_0x1dcda2===0x3){const _0x4b766f=[];for(let _0x1f6bfb=0x0;_0x1f6bfb<0x8;_0x1f6bfb++){_0x4b766f[_0x1d43b7(0x28e)](_0x165f9f['getUint16'](_0x43f3f5+_0x1f6bfb*0x2)['toString'](0x10));}_0x3a4122=_0x4b766f[_0x1d43b7(0x25d)](':'),_0x43f3f5+=0x10;}else return;}}const _0xe8aa60=new Uint8Array([_0x6ec314,0x0]),_0x436818=_0x24d820[_0x1d43b7(0x1f9)](_0x43f3f5);if(_0x4035cb===0x2){if(_0x23ba9b!==0x35)return;_0x114161=!![];let _0x207cb7=![];const {readable:_0x28efdb,writable:_0x12bac1}=new TransformStream({'transform'(_0x415e10,_0x1528cf){const _0x361af9=_0x1d43b7;let _0x398391=0x0;while(_0x398391<_0x415e10[_0x361af9(0x241)]){const _0xe2046a=new DataView(_0x415e10[_0x361af9(0x1f9)](_0x398391,_0x398391+0x2))[_0x361af9(0x26a)](0x0),_0x161845=_0x415e10[_0x361af9(0x1f9)](_0x398391+0x2,_0x398391+0x2+_0xe2046a);_0x1528cf[_0x361af9(0x280)](_0x161845),_0x398391+=0x2+_0xe2046a;}}});_0x28efdb[_0x1d43b7(0x27d)](new WritableStream({async 'write'(_0x411ff5){const _0x4b69d2=_0x1d43b7;try{const _0xf2b73d=await fetch('https://1.1.1.1/dns-query',{'method':_0x4b69d2(0x29f),'headers':{'Content-Type':'application/dns-message'},'body':_0x411ff5});if(_0xf2b73d['ok']&&_0x161307[_0x4b69d2(0x23d)]===0x1){const _0x3e15d4=new Uint8Array(await _0xf2b73d[_0x4b69d2(0x236)]()),_0x321b16=new Uint8Array([..._0x207cb7?[]:_0xe8aa60,_0x3e15d4[_0x4b69d2(0x204)]>>0x8,_0x3e15d4[_0x4b69d2(0x204)]&0xff,..._0x3e15d4]);_0x161307[_0x4b69d2(0x22e)](_0x321b16),_0x207cb7=!![],_0x2f673f['download']+=_0x321b16[_0x4b69d2(0x241)];}}catch(_0x2ad77d){console[_0x4b69d2(0x24a)](_0x4b69d2(0x270),_0x2ad77d);}}}))[_0x1d43b7(0x217)](()=>{}),_0x23d58d=_0x12bac1[_0x1d43b7(0x27f)]();try{await _0x23d58d[_0x1d43b7(0x231)](_0x436818),_0x2f673f['upload']+=_0x436818['byteLength'];}catch(_0x12326f){}return;}let _0x20e1ff=null;try{_0x20e1ff=connect({'hostname':_0x3a4122,'port':_0x23ba9b}),await _0x20e1ff[_0x1d43b7(0x26f)];}catch(_0x4c7a6a){if(_0x1fdfd1[_0x1d43b7(0x204)]>0x0){const _0x124d06=smartSortProxies(_0x1fdfd1,_0x3a4122);let _0x1b8478=null;for(let _0x44cf6b=0x0;_0x44cf6b<_0x124d06[_0x1d43b7(0x204)];_0x44cf6b++){const _0x2c9914=_0x124d06[_0x44cf6b],_0x3de43d=_0x2c9914[_0x1d43b7(0x285)](':'),_0x45d5e9=_0x3de43d[0x0],_0x35b809=_0x3de43d[0x1]?parseInt(_0x3de43d[0x1]):_0x23ba9b;try{_0x20e1ff=connect({'hostname':_0x45d5e9,'port':_0x35b809}),await _0x20e1ff['opened'];break;}catch(_0x37596d){_0x1b8478=_0x37596d;continue;}}if(!_0x20e1ff){console[_0x1d43b7(0x24a)](_0x1d43b7(0x23e),_0x1b8478);return;}}else{console['error'](_0x1d43b7(0x1f4));return;}}if(!_0x20e1ff)return;_0x767131=_0x20e1ff;try{const _0x59de1b=_0x20e1ff[_0x1d43b7(0x29e)][_0x1d43b7(0x27f)]();await _0x59de1b[_0x1d43b7(0x231)](_0x436818),_0x59de1b[_0x1d43b7(0x28b)](),_0x2f673f['upload']+=_0x436818[_0x1d43b7(0x241)];}catch(_0x1250e0){}let _0x4f3a44=![];_0x20e1ff[_0x1d43b7(0x20a)][_0x1d43b7(0x27d)](new WritableStream({'write'(_0x40e7ec){const _0x417657=_0x1d43b7;if(_0x161307[_0x417657(0x23d)]===0x1){if(!_0x4f3a44){const _0x4d4261=new Uint8Array([..._0xe8aa60,...new Uint8Array(_0x40e7ec)]);_0x161307['send'](_0x4d4261),_0x4f3a44=!![],_0x2f673f['download']+=_0x4d4261[_0x417657(0x241)];}else _0x161307[_0x417657(0x22e)](_0x40e7ec),_0x2f673f[_0x417657(0x24d)]+=_0x40e7ec['byteLength'];}},'close'(){const _0xc8df19=_0x1d43b7;_0x515a3a&&(reportTraffic(_0x515a3a['id'],_0x2f673f[_0xc8df19(0x222)],_0x2f673f[_0xc8df19(0x24d)],_0x4a4b73),cachedData['onlineUsers'][_0xc8df19(0x1f2)](_0x515a3a['id'])),_0x161307['readyState']===0x1&&_0x161307['close']();},'abort'(){const _0xaf0ca=_0x1d43b7;_0x161307[_0xaf0ca(0x23d)]===0x1&&_0x161307[_0xaf0ca(0x255)]();}}))[_0x1d43b7(0x217)](()=>{});}}))[_0x1ce803(0x217)](()=>{}),new Response(null,{'status':0x65,'webSocket':_0x2d3a55});}function reportTraffic(_0x26696d,_0x40ad1b,_0x44df9a,_0x5ba7fe){const _0x142dc4=a0_0xdbeb0a;cachedData[_0x142dc4(0x224)]['push']({'uid':_0x26696d,'upload':_0x40ad1b,'download':_0x44df9a,'timestamp':Date[_0x142dc4(0x206)]()}),cachedData[_0x142dc4(0x224)][_0x142dc4(0x204)]>=0x5&&_0x5ba7fe[_0x142dc4(0x211)](Promise[_0x142dc4(0x21b)]([flushTrafficBuffer(),reportOnlineUsers()]));}async function flushTrafficBuffer(){const _0x4c636f=a0_0xdbeb0a;if(cachedData[_0x4c636f(0x224)][_0x4c636f(0x204)]===0x0)return;const _0x390ccc={};cachedData['trafficBuffer'][_0x4c636f(0x263)](_0x176c24=>{const _0x42c478=_0x4c636f;!_0x390ccc[_0x176c24['uid']]&&(_0x390ccc[_0x176c24[_0x42c478(0x218)]]=[0x0,0x0]),_0x390ccc[_0x176c24[_0x42c478(0x218)]][0x0]+=_0x176c24[_0x42c478(0x222)],_0x390ccc[_0x176c24[_0x42c478(0x218)]][0x1]+=_0x176c24[_0x42c478(0x24d)];}),cachedData['trafficBuffer']=[];try{const _0x1e5cc0=V2BOARD_CONFIG[_0x4c636f(0x259)]+'/api/v1/server/UniProxy/push?node_type='+V2BOARD_CONFIG['nodeType']+_0x4c636f(0x20b)+V2BOARD_CONFIG[_0x4c636f(0x26c)]+_0x4c636f(0x253)+V2BOARD_CONFIG[_0x4c636f(0x220)],_0xe26055=await fetch(_0x1e5cc0,{'method':_0x4c636f(0x29f),'headers':{'Content-Type':_0x4c636f(0x219),'User-Agent':_0x4c636f(0x230)},'body':JSON[_0x4c636f(0x22c)](_0x390ccc)});!_0xe26055['ok']?console[_0x4c636f(0x24a)](_0x4c636f(0x268),_0xe26055['status']):console[_0x4c636f(0x286)](_0x4c636f(0x20c)+Object[_0x4c636f(0x249)](_0x390ccc)['length']+'\x20users');}catch(_0x4c497d){console[_0x4c636f(0x24a)](_0x4c636f(0x252),_0x4c497d[_0x4c636f(0x25a)]);}}async function reportOnlineUsers(){const _0x2f2164=a0_0xdbeb0a;if(cachedData['onlineUsers']['size']===0x0)return;try{const _0x43767b={};cachedData[_0x2f2164(0x22f)][_0x2f2164(0x263)](_0xa7fb7b=>{const _0x1db879=_0x2f2164;_0x43767b[_0xa7fb7b]=[_0x1db879(0x21c)];});const _0x1b78eb=V2BOARD_CONFIG[_0x2f2164(0x259)]+_0x2f2164(0x284)+V2BOARD_CONFIG['nodeType']+_0x2f2164(0x20b)+V2BOARD_CONFIG[_0x2f2164(0x26c)]+_0x2f2164(0x253)+V2BOARD_CONFIG[_0x2f2164(0x220)],_0x150d4d=await fetch(_0x1b78eb,{'method':_0x2f2164(0x29f),'headers':{'Content-Type':_0x2f2164(0x219),'User-Agent':_0x2f2164(0x230)},'body':JSON[_0x2f2164(0x22c)](_0x43767b)});!_0x150d4d['ok']?console[_0x2f2164(0x24a)]('Report\x20online\x20users\x20failed:',_0x150d4d['status']):console['log'](_0x2f2164(0x2a1)+cachedData[_0x2f2164(0x22f)]['size']+_0x2f2164(0x290));}catch(_0x25d0e5){console['error'](_0x2f2164(0x21e),_0x25d0e5[_0x2f2164(0x25a)]);}}function bytesToUUID(_0x22a956){const _0x59fbf1=a0_0xdbeb0a,_0x35dd85=[];for(let _0x1ac5d7=0x0;_0x1ac5d7<0x100;_0x1ac5d7++){_0x35dd85[_0x59fbf1(0x28e)]((_0x1ac5d7+0x100)[_0x59fbf1(0x275)](0x10)[_0x59fbf1(0x209)](0x1));}const _0x737403=[_0x35dd85[_0x22a956[0x0]]+_0x35dd85[_0x22a956[0x1]]+_0x35dd85[_0x22a956[0x2]]+_0x35dd85[_0x22a956[0x3]],_0x35dd85[_0x22a956[0x4]]+_0x35dd85[_0x22a956[0x5]],_0x35dd85[_0x22a956[0x6]]+_0x35dd85[_0x22a956[0x7]],_0x35dd85[_0x22a956[0x8]]+_0x35dd85[_0x22a956[0x9]],_0x35dd85[_0x22a956[0xa]]+_0x35dd85[_0x22a956[0xb]]+_0x35dd85[_0x22a956[0xc]]+_0x35dd85[_0x22a956[0xd]]+_0x35dd85[_0x22a956[0xe]]+_0x35dd85[_0x22a956[0xf]]];return _0x737403[_0x59fbf1(0x25d)]('-')[_0x59fbf1(0x24b)]();}